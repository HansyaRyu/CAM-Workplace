<!DOCTYPE html>
<html>
<head>
<title>Main Page</title>
<style>
body { font-family: Arial; background:#d7eaff; text-align:center; padding-top:50px;}
.btn { display:block; width:250px; margin:15px auto; padding:15px; background:#001f54; color:white; text-decoration:none; border-radius:8px; font-weight:bold; cursor:pointer;}
.btn:hover { transform:scale(1.05);}
.logout { background:#f7d000; color:black;}
.logout:hover { background:#ffea4d;}
</style>
</head>
<body>

<h2>Main Menu</h2>
<a class="btn" href="Cam 3 masterlist.html">Masterlist</a>
<a class="btn" href="Cam 4 host.html">Host</a>
<a class="btn" href="Cam 5 CAM.html">Cam</a>
<a class="btn" href="https://drive.google.com/file/d/1o2gQu3UJG6S6rTM7GISpgNQZK7zx691Q/view?usp=sharing">Work Timetable</a>

<button class="btn logout" onclick="logout()">Logout</button>

<script>
function isLoggedIn(){ return localStorage.getItem("isLogin")==="true";}

// If not logged in → go to login
if(!isLoggedIn()){ window.location.href="Cam 1 login.html"; }

// Undo/Back/Forward/Next → restore recent activity
history.pushState(null,null,location.href);
window.onpopstate=function(){
    if(!isLoggedIn()){ window.location.href="Cam 1 login.html"; }
};

// Auto logout 30 mins
const INACTIVITY_LIMIT = 30*60*1000;
let inactivityTimer;
function resetTimer(){ clearTimeout(inactivityTimer); inactivityTimer=setTimeout(autoLogout,INACTIVITY_LIMIT); }
function autoLogout(){ alert("Logged out due to 30 min inactivity."); logout(); }

window.onload=resetTimer;
document.onmousemove=resetTimer;
document.onkeydown=resetTimer;
document.onclick=resetTimer;
document.onscroll=resetTimer;

function logout(){
    localStorage.clear();
    sessionStorage.clear();
    window.location.href="Cam 1 login.html";
}
</script>

</body>
</html>

